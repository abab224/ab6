{"ast":null,"code":"import React,{useState,useEffect}from'react';import io from'socket.io-client';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const socket=io('https://line-chat-backend.onrender.com');// サーバーのURL\nconst Chat=_ref=>{let{user}=_ref;const[message,setMessage]=useState('');const[messages,setMessages]=useState([]);useEffect(()=>{socket.on('receive_message',data=>{setMessages(prev=>[...prev,data]);});return()=>{socket.off();};},[]);const sendMessage=()=>{if(message.trim()){const newMessage={username:user.username,text:message};socket.emit('send_message',newMessage);setMessages(prev=>[...prev,newMessage]);setMessage('');}};return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u3088\\u3046\\u3053\\u305D\\u3001\",user.username,\"\\u3055\\u3093\"]}),/*#__PURE__*/_jsx(\"div\",{style:{height:'400px',overflowY:'scroll',border:'1px solid #ccc',padding:'10px'},children:messages.map((msg,index)=>/*#__PURE__*/_jsx(\"div\",{style:{textAlign:msg.username===user.username?'right':'left'},children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'inline-block',padding:'10px',borderRadius:'10px',backgroundColor:msg.username===user.username?'#DCF8C6':'#FFF',margin:'5px 0'},children:[/*#__PURE__*/_jsx(\"strong\",{children:msg.username}),/*#__PURE__*/_jsx(\"p\",{children:msg.text})]})},index))}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),placeholder:\"\\u30E1\\u30C3\\u30BB\\u30FC\\u30B8\\u3092\\u5165\\u529B...\",style:{width:'80%',padding:'10px'}}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,style:{padding:'10px 20px'},children:\"\\u9001\\u4FE1\"})]});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","io","jsxs","_jsxs","jsx","_jsx","socket","Chat","_ref","user","message","setMessage","messages","setMessages","on","data","prev","off","sendMessage","trim","newMessage","username","text","emit","style","padding","children","height","overflowY","border","map","msg","index","textAlign","display","borderRadius","backgroundColor","margin","type","value","onChange","e","target","placeholder","width","onClick"],"sources":["C:/Users/81704/Desktop/LINE-like-chat/src/Chat.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport io from 'socket.io-client';\r\n\r\nconst socket = io('https://line-chat-backend.onrender.com'); // サーバーのURL\r\n\r\nconst Chat = ({ user }) => {\r\n  const [message, setMessage] = useState('');\r\n  const [messages, setMessages] = useState([]);\r\n\r\n  useEffect(() => {\r\n    socket.on('receive_message', (data) => {\r\n      setMessages((prev) => [...prev, data]);\r\n    });\r\n\r\n    return () => {\r\n      socket.off();\r\n    };\r\n  }, []);\r\n\r\n  const sendMessage = () => {\r\n    if (message.trim()) {\r\n      const newMessage = { username: user.username, text: message };\r\n      socket.emit('send_message', newMessage);\r\n      setMessages((prev) => [...prev, newMessage]);\r\n      setMessage('');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ padding: '20px' }}>\r\n      <h2>ようこそ、{user.username}さん</h2>\r\n      <div style={{ height: '400px', overflowY: 'scroll', border: '1px solid #ccc', padding: '10px' }}>\r\n        {messages.map((msg, index) => (\r\n          <div key={index} style={{ textAlign: msg.username === user.username ? 'right' : 'left' }}>\r\n            <div\r\n              style={{\r\n                display: 'inline-block',\r\n                padding: '10px',\r\n                borderRadius: '10px',\r\n                backgroundColor: msg.username === user.username ? '#DCF8C6' : '#FFF',\r\n                margin: '5px 0',\r\n              }}\r\n            >\r\n              <strong>{msg.username}</strong>\r\n              <p>{msg.text}</p>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      <input\r\n        type=\"text\"\r\n        value={message}\r\n        onChange={(e) => setMessage(e.target.value)}\r\n        placeholder=\"メッセージを入力...\"\r\n        style={{ width: '80%', padding: '10px' }}\r\n      />\r\n      <button onClick={sendMessage} style={{ padding: '10px 20px' }}>\r\n        送信\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}